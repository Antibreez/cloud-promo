"use strict";!function(){var t=document.querySelector(".header__bg"),e=(new Parallax(t),document.querySelector(".how-it-works__bg"));new Parallax(e)}(),function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"));var e,o,i=document.querySelector("body");function n(t,e){this.trigger=t,this.modal=e,this.overlay=this.modal.querySelector(".modal__overlay"),this.closeBtn=this.modal.querySelector(".modal__close"),this.onOverlayClick=this.onOverlayClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.addEventListeners()}window.addEventListener("resize",(e=function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))},function(t){o&&clearTimeout(o),o=setTimeout(e,100,t)})),n.prototype.open=function(){this.modal.classList.add("js-show"),i.classList.add("js__body-no-scroll")},n.prototype.close=function(){this.modal.classList.remove("js-show"),i.classList.remove("js__body-no-scroll")},n.prototype.onOverlayClick=function(t){t.target===this.overlay&&this.close()},n.prototype.onCloseClick=function(){this.close()},n.prototype.onTriggerClick=function(){this.open()},n.prototype.addEventListeners=function(){this.overlay.addEventListener("click",this.onOverlayClick),this.closeBtn.addEventListener("click",this.onCloseClick),this.trigger.addEventListener("click",this.onTriggerClick)},window.Modal=n}(),function(){var t=document.querySelectorAll(".input-phone");if(t[0]){var e=new Inputmask("+7(999) 999-99-99");t.forEach((function(t){e.mask(t)}))}}(),$("a.header__nav-link").click((function(){var t=$(this).attr("href"),e=$(t).offset().top-80;return $("html, body").animate({scrollTop:e},400),$(this).parents(".header__bar").removeClass("js-opened"),!1})),$(window).scrollTop()>800?$(".to-top").addClass("show"):$(".to-top").removeClass("show"),$(window).scroll((function(){$(this).scrollTop()>800?$(".to-top").addClass("show"):$(".to-top").removeClass("show")})),$(".to-top").click((function(){$("html, body").animate({scrollTop:0},400)})),document.querySelectorAll(".mobile-control__item-text"),function(){document.querySelector(".catalog__filters-list");var t=document.querySelectorAll(".catalog__item"),e=document.querySelectorAll(".catalog__filters-radio"),o=function(){t.forEach((function(t){!function(t){t.classList.contains("hidden")&&t.classList.remove("hidden")}(t)}))},i=function(e){!function(e){"all"===e?o():(o(),t.forEach((function(t){t.getAttribute("data-brand")!==e&&function(t){t.classList.contains("hidden")||t.classList.add("hidden")}(t)})))}(e.currentTarget.getAttribute("value"))};e.forEach((function(t){t.addEventListener("change",i)})),$(".catalog__select-block select").change((function(){var t=$(this).children("option:selected").text(),e=$(this).val();$(this).parent().prev().text(t),$(".catalog__item").addClass("hidden"),$(".catalog__item[data-brand="+e+"]").removeClass("hidden")}))}(),new Swiper(".device-card__slider-container",{watchOverflow:!0,pagination:{el:".swiper-pagination",clickable:!0}}),$(".header__nav-btn").click((function(){$(this).parents(".header__bar").toggleClass("js-opened")})),$(".mobile-control-mobile__item-top").click((function(){$(this).toggleClass("opened"),$(this).next().slideToggle()})),$(".questions__item-top").click((function(){$(this).toggleClass("opened"),$(this).next().slideToggle()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyIsInBob25lLW1hc2suanMiLCJzY3JvbGwuanMiLCJhcHAtc2xpZGVzLXRvZ2dsZS5qcyIsImNhdGFsb2cuanMiLCJkZXZpY2Utc2xpZGVyLmpzIiwiaGVhZGVyLmpzIiwibW9iaWxlLWNvbnRyb2wuanMiLCJxdWVzdGlvbnMuanMiXSwibmFtZXMiOlsic2NlbmVIZWFkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY2VuZVdvcmtzIiwiUGFyYWxsYXgiLCJ2aCIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsImNvbmNhdCIsImZ1bmMiLCJ0aW1lciIsIiRib2R5IiwiTW9kYWwiLCJ0cmlnZ2VyIiwibW9kYWwiLCJ0aGlzIiwib3ZlcmxheSIsImNsb3NlQnRuIiwib25PdmVybGF5Q2xpY2siLCJiaW5kIiwib25DbG9zZUNsaWNrIiwib25UcmlnZ2VyQ2xpY2siLCJhZGRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJwcm90b3R5cGUiLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2UiLCJyZW1vdmUiLCJlIiwidGFyZ2V0IiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImltIiwiSW5wdXRtYXNrIiwiZm9yRWFjaCIsIml0ZW0iLCJtYXNrIiwiJCIsImNsaWNrIiwiZWxlbWVudENsaWNrIiwiYXR0ciIsImRlc3RpbmF0aW9uIiwib2Zmc2V0IiwidG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInBhcmVudHMiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2Nyb2xsIiwiY2FyZHMiLCJyYWRpb3MiLCJzaG93QWxsQ2FyZHMiLCJjYXJkIiwiY29udGFpbnMiLCJzaG93Q2FyZCIsIm9uUmFkaW9DaGFuZ2UiLCJicmFuZCIsImdldEF0dHJpYnV0ZSIsImhpZGVDYXJkIiwicmVuZGVyQ2FyZHMiLCJjdXJyZW50VGFyZ2V0IiwicmFkaW8iLCJjaGFuZ2UiLCJ0ZXh0IiwiY2hpbGRyZW4iLCJ2YWx1ZSIsInZhbCIsInBhcmVudCIsInByZXYiLCJTd2lwZXIiLCJ3YXRjaE92ZXJmbG93IiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwidG9nZ2xlQ2xhc3MiLCJuZXh0Iiwic2xpZGVUb2dnbGUiXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FDQSxJQUFBQSxFQUFBQyxTQUFBQyxjQUFBLGVBR0FDLEdBRkEsSUFBQUMsU0FBQUosR0FFQUMsU0FBQUMsY0FBQSxzQkFDQSxJQUFBRSxTQUFBRCxHQUxBLEdDQUEsV0FDQSxJQUFBRSxFQUFBLElBQUFDLE9BQUFDLFlBQ0FOLFNBQUFPLGdCQUFBQyxNQUFBQyxZQUFBLE9BQUEsR0FBQUMsT0FBQU4sRUFBQSxPQUVBLElBRUFPLEVBQ0FDLEVBSEFDLEVBQUFiLFNBQUFDLGNBQUEsUUFpQkEsU0FBQWEsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQUYsUUFBQUEsRUFDQUUsS0FBQUQsTUFBQUEsRUFDQUMsS0FBQUMsUUFBQUQsS0FBQUQsTUFBQWYsY0FBQSxtQkFDQWdCLEtBQUFFLFNBQUFGLEtBQUFELE1BQUFmLGNBQUEsaUJBRUFnQixLQUFBRyxlQUFBSCxLQUFBRyxlQUFBQyxLQUFBSixNQUNBQSxLQUFBSyxhQUFBTCxLQUFBSyxhQUFBRCxLQUFBSixNQUNBQSxLQUFBTSxlQUFBTixLQUFBTSxlQUFBRixLQUFBSixNQUdBQSxLQUFBTyxvQkFiQW5CLE9BQUFvQixpQkFBQSxVQWJBZCxFQVFBLFdBQ0EsSUFBQVAsRUFBQSxJQUFBQyxPQUFBQyxZQUNBTixTQUFBTyxnQkFBQUMsTUFBQUMsWUFBQSxPQUFBLEdBQUFDLE9BQUFOLEVBQUEsUUFSQSxTQUFBc0IsR0FDQWQsR0FBQWUsYUFBQWYsR0FDQUEsRUFBQWdCLFdBQUFqQixFQUFBLElBQUFlLE1BeUJBWixFQUFBZSxVQUFBQyxLQUFBLFdB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QUFBLFdBQ0FELEVBQUEzQixNQUFBaUUsWUFBQSxVQUNBdEMsRUFBQTNCLE1BQUFrRSxPQUFBQyxpQkNGQXhDLEVBQUEsd0JBQUFDLE9BQUEsV0FDQUQsRUFBQTNCLE1BQUFpRSxZQUFBLFVBQ0F0QyxFQUFBM0IsTUFBQWtFLE9BQUFDIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNjZW5lSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmcnKTtcbiAgdmFyIGhlYWRlclBhcmFsbGF4SW5zdGFuY2UgPSBuZXcgUGFyYWxsYXgoc2NlbmVIZWFkZXIpO1xuICB2YXIgc2NlbmVXb3JrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob3ctaXQtd29ya3NfX2JnJyk7XG4gIHZhciB3b3Jrc1BhcmFsbGF4SW5zdGFuY2UgPSBuZXcgUGFyYWxsYXgoc2NlbmVXb3Jrcyk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBcIlwiLmNvbmNhdCh2aCwgXCJweFwiKSk7XG4gIHZhciAkYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jKSB7XG4gICAgdmFyIHRpbWVyO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICh0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLCAxMDAsIGV2ZW50KTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgdmFyIHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBcIlwiLmNvbmNhdCh2aCwgXCJweFwiKSk7XG4gIH1cblxuICA7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShvblJlc2l6ZSkpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsKHRyaWdnZXIsIG1vZGFsKSB7XG4gICAgdGhpcy50cmlnZ2VyID0gdHJpZ2dlcjtcbiAgICB0aGlzLm1vZGFsID0gbW9kYWw7XG4gICAgdGhpcy5vdmVybGF5ID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX292ZXJsYXknKTtcbiAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTsgLy90aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LmFkZCgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnanMtc2hvdycpO1xuICAgICRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2pzX19ib2R5LW5vLXNjcm9sbCcpO1xuICB9O1xuXG4gIE1vZGFsLnByb3RvdHlwZS5vbk92ZXJsYXlDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uQ2xvc2VDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uVHJpZ2dlckNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3BlbigpO1xuICB9OyAvLyBNb2RhbC5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgLy8gICAgIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIC8vICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuICAvLyB9O1xuXG5cbiAgTW9kYWwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25PdmVybGF5Q2xpY2spO1xuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VDbGljayk7XG4gICAgdGhpcy50cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblRyaWdnZXJDbGljayk7XG4gIH07XG5cbiAgd2luZG93Lk1vZGFsID0gTW9kYWw7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgaWYgKCFpbnB1dHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG4gIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaW0ubWFzayhpdGVtKTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAkKFwiYS5oZWFkZXJfX25hdi1saW5rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWxlbWVudENsaWNrID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gJChlbGVtZW50Q2xpY2spLm9mZnNldCgpLnRvcCAtIDgwO1xuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogZGVzdGluYXRpb25cbiAgICB9LCA0MDApO1xuICAgICQodGhpcykucGFyZW50cygnLmhlYWRlcl9fYmFyJykucmVtb3ZlQ2xhc3MoJ2pzLW9wZW5lZCcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG4gICQod2luZG93KS5zY3JvbGxUb3AoKSA+IDgwMCA/ICQoJy50by10b3AnKS5hZGRDbGFzcygnc2hvdycpIDogJCgnLnRvLXRvcCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykuc2Nyb2xsVG9wKCkgPiA4MDAgPyAkKCcudG8tdG9wJykuYWRkQ2xhc3MoJ3Nob3cnKSA6ICQoJy50by10b3AnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICB9KTtcbiAgJCgnLnRvLXRvcCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxUb3A6IDBcbiAgICB9LCA0MDApO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtY29udHJvbF9faXRlbS10ZXh0Jyk7XG5cbiAgdmFyIG9uSXRlbXNDbGljayA9IGZ1bmN0aW9uIG9uSXRlbXNDbGljayhlKSB7Ly9lLnByZXZlbnREZWZhdWx0KCk7XG4gIH07IC8vIGNvbnN0IG9uSXRlbU92ZXIgPSBmdW5jdGlvbihlKSB7XG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAvLyAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdob3ZlcmVkJyk7XG4gIC8vIH1cbiAgLy8gY29uc3Qgb25JdGVtTGVhdmUgPSBmdW5jdGlvbihlKSB7XG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAvLyAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcmVkJyk7XG4gIC8vIH1cbiAgLy8gaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uSXRlbXNDbGljayk7XG4gIC8vICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25JdGVtT3Zlcik7XG4gIC8vICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgb25JdGVtTGVhdmUpO1xuICAvLyB9KTtcbiAgLy8gJCgnbW9iaWxlLWNvbnRyb2xfX2l0ZW0tdGV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAvLyAgICQoJy5tb2JpbGUtY29udHJvbF9faXRlbS10ZXh0JykucmVtb3ZlQ2xhc3MoaG8pXG4gIC8vIH0pO1xuXG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgZmlsdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLWxpc3QnKTsgLy8gY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImFsbFwiXScpO1xuICAvLyBjb25zdCBkYWljaGlSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiZGFpY2hpXCJdJyk7XG4gIC8vIGNvbnN0IGRhaWtpblJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJkYWlraW5cIl0nKTtcbiAgLy8gY29uc3QgYm9zY2hSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiYm9zY2hcIl0nKTtcbiAgLy8gY29uc3QgbWlkZWFSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwibWlkZWFcIl0nKTtcblxuICB2YXIgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19faXRlbScpO1xuICB2YXIgcmFkaW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW8nKTsgLy8gY29uc3QgZmluZENoZWNrZWRCcmFuZCA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGxldCBicmFuZCA9ICcnO1xuICAvLyAgIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uKHJhZGlvKSB7XG4gIC8vICAgICBpZiAocmFkaW8uY2hlY2tlZCkge1xuICAvLyAgICAgICBicmFuZCA9IHJhZGlvLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcbiAgLy8gICByZXR1cm4gYnJhbmQ7XG4gIC8vIH07XG5cbiAgdmFyIHNob3dDYXJkID0gZnVuY3Rpb24gc2hvd0NhcmQoY2FyZCkge1xuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoaWRlQ2FyZCA9IGZ1bmN0aW9uIGhpZGVDYXJkKGNhcmQpIHtcbiAgICBpZiAoIWNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHNob3dBbGxDYXJkcyA9IGZ1bmN0aW9uIHNob3dBbGxDYXJkcygpIHtcbiAgICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uIChjYXJkKSB7XG4gICAgICBzaG93Q2FyZChjYXJkKTtcbiAgICB9KTtcbiAgfTsgLy8gY29uc3QgaGlkZUFsbENhcmRzID0gZnVuY3Rpb24oKSB7XG4gIC8vICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKSB7XG4gIC8vICAgIGhpZGVDYXJkKGNhcmQpO1xuICAvLyAgIH0pXG4gIC8vIH07XG5cblxuICB2YXIgcmVuZGVyQ2FyZHMgPSBmdW5jdGlvbiByZW5kZXJDYXJkcyhicmFuZCkge1xuICAgIGlmIChicmFuZCA9PT0gJ2FsbCcpIHtcbiAgICAgIHNob3dBbGxDYXJkcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93QWxsQ2FyZHMoKTtcbiAgICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24gKGNhcmQpIHtcbiAgICAgICAgaWYgKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLWJyYW5kJykgIT09IGJyYW5kKSB7XG4gICAgICAgICAgaGlkZUNhcmQoY2FyZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb25SYWRpb0NoYW5nZSA9IGZ1bmN0aW9uIG9uUmFkaW9DaGFuZ2UoZSkge1xuICAgIHZhciBicmFuZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgcmVuZGVyQ2FyZHMoYnJhbmQpO1xuICB9O1xuXG4gIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uIChyYWRpbykge1xuICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uUmFkaW9DaGFuZ2UpO1xuICB9KTtcbiAgJCgnLmNhdGFsb2dfX3NlbGVjdC1ibG9jayBzZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ZXh0ID0gJCh0aGlzKS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpO1xuICAgIHZhciB2YWx1ZSA9ICQodGhpcykudmFsKCk7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5wcmV2KCkudGV4dCh0ZXh0KTtcbiAgICAkKCcuY2F0YWxvZ19faXRlbScpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkKCcuY2F0YWxvZ19faXRlbVtkYXRhLWJyYW5kPScgKyB2YWx1ZSArICddJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuZGV2aWNlLWNhcmRfX3NsaWRlci1jb250YWluZXInLCB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgIHdhdGNoT3ZlcmZsb3c6IHRydWUsXG4gICAgLy9sb29wOiB0cnVlLFxuICAgIC8vIElmIHdlIG5lZWQgcGFnaW5hdGlvblxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAkKCcuaGVhZGVyX19uYXYtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykucGFyZW50cygnLmhlYWRlcl9fYmFyJykudG9nZ2xlQ2xhc3MoJ2pzLW9wZW5lZCcpO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICQoJy5tb2JpbGUtY29udHJvbC1tb2JpbGVfX2l0ZW0tdG9wJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICQodGhpcykubmV4dCgpLnNsaWRlVG9nZ2xlKCk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLnF1ZXN0aW9uc19faXRlbS10b3AnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gICAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcbiAgfSk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgdmFyIHNjZW5lSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmcnKTtcbiAgdmFyIGhlYWRlclBhcmFsbGF4SW5zdGFuY2UgPSBuZXcgUGFyYWxsYXgoc2NlbmVIZWFkZXIpO1xuXG4gIHZhciBzY2VuZVdvcmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvdy1pdC13b3Jrc19fYmcnKTtcbiAgdmFyIHdvcmtzUGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZVdvcmtzKTtcbn0pKCk7XG4iLCIoKCkgPT4ge1xuICBsZXQgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuXG4gIGNvbnN0ICRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMpe1xuICAgIHZhciB0aW1lcjtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgaWYodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuYywxMDAsZXZlbnQpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShvblJlc2l6ZSkpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsICh0cmlnZ2VyLCBtb2RhbCkge1xuICAgIHRoaXMudHJpZ2dlciA9IHRyaWdnZXI7XG4gICAgdGhpcy5tb2RhbCA9IG1vZGFsO1xuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19vdmVybGF5Jyk7XG4gICAgdGhpcy5jbG9zZUJ0biA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuXG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTtcbiAgICAvL3RoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnanMtc2hvdycpO1xuICAgICRib2R5LmNsYXNzTGlzdC5hZGQoJ2pzX19ib2R5LW5vLXNjcm9sbCcpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25PdmVybGF5Q2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25DbG9zZUNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uVHJpZ2dlckNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5vcGVuKCk7XG4gIH1cblxuICAvLyBNb2RhbC5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgLy8gICAgIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIC8vICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuICAvLyB9O1xuXG4gIE1vZGFsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25PdmVybGF5Q2xpY2spO1xuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VDbGljayk7XG4gICAgdGhpcy50cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblRyaWdnZXJDbGljayk7XG4gIH1cblxuICB3aW5kb3cuTW9kYWwgPSBNb2RhbDtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dC1waG9uZScpO1xuXG4gIGlmICghaW5wdXRzWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG5cbiAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgIGltLm1hc2soaXRlbSk7XG4gIH0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAkKFwiYS5oZWFkZXJfX25hdi1saW5rXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtZW50Q2xpY2sgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSAkKGVsZW1lbnRDbGljaykub2Zmc2V0KCkudG9wIC0gODA7XG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogZGVzdGluYXRpb259LCA0MDApO1xuXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyX19iYXInKS5yZW1vdmVDbGFzcygnanMtb3BlbmVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxuICAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiA4MDBcbiAgICAgID8gJCgnLnRvLXRvcCcpLmFkZENsYXNzKCdzaG93JylcbiAgICAgIDogJCgnLnRvLXRvcCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLnNjcm9sbFRvcCgpID4gODAwXG4gICAgICA/ICQoJy50by10b3AnKS5hZGRDbGFzcygnc2hvdycpXG4gICAgICA6ICQoJy50by10b3AnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICB9KTtcblxuICAkKCcudG8tdG9wJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sIDQwMCk7XG4gIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9iaWxlLWNvbnRyb2xfX2l0ZW0tdGV4dCcpO1xuXG4gIGNvbnN0IG9uSXRlbXNDbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAvL2UucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIC8vIGNvbnN0IG9uSXRlbU92ZXIgPSBmdW5jdGlvbihlKSB7XG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAvLyAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdob3ZlcmVkJyk7XG4gIC8vIH1cblxuICAvLyBjb25zdCBvbkl0ZW1MZWF2ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgLy8gICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyZWQnKTtcbiAgLy8gfVxuXG4gIC8vIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAvLyAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkl0ZW1zQ2xpY2spO1xuICAvLyAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIG9uSXRlbU92ZXIpO1xuICAvLyAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG9uSXRlbUxlYXZlKTtcbiAgLy8gfSk7XG5cbiAgLy8gJCgnbW9iaWxlLWNvbnRyb2xfX2l0ZW0tdGV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAvLyAgICQoJy5tb2JpbGUtY29udHJvbF9faXRlbS10ZXh0JykucmVtb3ZlQ2xhc3MoaG8pXG4gIC8vIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgZmlsdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLWxpc3QnKTtcblxuICAvLyBjb25zdCBhbGxSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiYWxsXCJdJyk7XG4gIC8vIGNvbnN0IGRhaWNoaVJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJkYWljaGlcIl0nKTtcbiAgLy8gY29uc3QgZGFpa2luUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImRhaWtpblwiXScpO1xuICAvLyBjb25zdCBib3NjaFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJib3NjaFwiXScpO1xuICAvLyBjb25zdCBtaWRlYVJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJtaWRlYVwiXScpO1xuXG4gIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2dfX2l0ZW0nKTtcblxuICBjb25zdCByYWRpb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpbycpO1xuXG4gIC8vIGNvbnN0IGZpbmRDaGVja2VkQnJhbmQgPSBmdW5jdGlvbigpIHtcbiAgLy8gICBsZXQgYnJhbmQgPSAnJztcbiAgLy8gICByYWRpb3MuZm9yRWFjaChmdW5jdGlvbihyYWRpbykge1xuICAvLyAgICAgaWYgKHJhZGlvLmNoZWNrZWQpIHtcbiAgLy8gICAgICAgYnJhbmQgPSByYWRpby5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gIC8vICAgICB9XG4gIC8vICAgfSk7XG5cbiAgLy8gICByZXR1cm4gYnJhbmQ7XG4gIC8vIH07XG5cbiAgY29uc3Qgc2hvd0NhcmQgPSBmdW5jdGlvbihjYXJkKSB7XG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGlkZUNhcmQgPSBmdW5jdGlvbihjYXJkKSB7XG4gICAgaWYgKCFjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNob3dBbGxDYXJkcyA9IGZ1bmN0aW9uKCkge1xuICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24oY2FyZCkge1xuICAgICAgc2hvd0NhcmQoY2FyZCk7XG4gICAgfSlcbiAgfTtcblxuICAvLyBjb25zdCBoaWRlQWxsQ2FyZHMgPSBmdW5jdGlvbigpIHtcbiAgLy8gICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpIHtcbiAgLy8gICAgaGlkZUNhcmQoY2FyZCk7XG4gIC8vICAgfSlcbiAgLy8gfTtcblxuICBjb25zdCByZW5kZXJDYXJkcyA9IGZ1bmN0aW9uKGJyYW5kKSB7XG4gICAgaWYgKGJyYW5kID09PSAnYWxsJykge1xuICAgICAgc2hvd0FsbENhcmRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dBbGxDYXJkcygpO1xuICAgICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKSB7XG4gICAgICAgIGlmIChjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1icmFuZCcpICE9PSBicmFuZCkge1xuICAgICAgICAgIGhpZGVDYXJkKGNhcmQpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBvblJhZGlvQ2hhbmdlID0gZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IGJyYW5kID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICByZW5kZXJDYXJkcyhicmFuZCk7XG4gIH07XG5cbiAgcmFkaW9zLmZvckVhY2goZnVuY3Rpb24ocmFkaW8pIHtcbiAgICByYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvblJhZGlvQ2hhbmdlKTtcbiAgfSk7XG5cblxuICAkKCcuY2F0YWxvZ19fc2VsZWN0LWJsb2NrIHNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ZXh0ID0gJCh0aGlzKS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpO1xuICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS52YWwoKTtcbiAgICAkKHRoaXMpLnBhcmVudCgpLnByZXYoKS50ZXh0KHRleHQpO1xuXG4gICAgJCgnLmNhdGFsb2dfX2l0ZW0nKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAkKCcuY2F0YWxvZ19faXRlbVtkYXRhLWJyYW5kPScgKyB2YWx1ZSArICddJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gIH0pXG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoJy5kZXZpY2UtY2FyZF9fc2xpZGVyLWNvbnRhaW5lcicsIHtcbiAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gICAgd2F0Y2hPdmVyZmxvdzogdHJ1ZSxcbiAgICAvL2xvb3A6IHRydWUsXG4gICAgLy8gSWYgd2UgbmVlZCBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICAkKCcuaGVhZGVyX19uYXYtYnRuJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyX19iYXInKS50b2dnbGVDbGFzcygnanMtb3BlbmVkJyk7XG4gIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJCgnLm1vYmlsZS1jb250cm9sLW1vYmlsZV9faXRlbS10b3AnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgpO1xuICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoJy5xdWVzdGlvbnNfX2l0ZW0tdG9wJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gICAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcbiAgfSk7XG59KSgpO1xuIl19
