"use strict";!function(){var t=document.querySelector(".header__bg"),e=(new Parallax(t),document.querySelector(".how-it-works__bg"));new Parallax(e)}(),function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"));var e,o,i=document.querySelector("body");function n(t,e){this.trigger=t,this.modal=e,this.overlay=this.modal.querySelector(".modal__overlay"),this.closeBtn=this.modal.querySelector(".modal__close"),this.onOverlayClick=this.onOverlayClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.addEventListeners()}window.addEventListener("resize",(e=function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))},function(t){o&&clearTimeout(o),o=setTimeout(e,100,t)})),n.prototype.open=function(){this.modal.classList.add("js-show"),i.classList.add("js__body-no-scroll")},n.prototype.close=function(){this.modal.classList.remove("js-show"),i.classList.remove("js__body-no-scroll")},n.prototype.onOverlayClick=function(t){t.target===this.overlay&&this.close()},n.prototype.onCloseClick=function(){this.close()},n.prototype.onTriggerClick=function(){this.open()},n.prototype.addEventListeners=function(){this.overlay.addEventListener("click",this.onOverlayClick),this.closeBtn.addEventListener("click",this.onCloseClick),this.trigger.addEventListener("click",this.onTriggerClick)},window.Modal=n}(),function(){var t=document.querySelectorAll(".input-phone");if(t[0]){var e=new Inputmask("+7(999) 999-99-99");t.forEach((function(t){e.mask(t)}))}}(),$("a.header__nav-link").click((function(){var t=$(this).attr("href"),e=$(t).offset().top-80;return $("html, body").animate({scrollTop:e},400),$(this).parents(".header__bar").removeClass("js-opened"),!1})),$(window).scrollTop()>800?$(".to-top").addClass("show"):$(".to-top").removeClass("show"),$(window).scroll((function(){$(this).scrollTop()>800?$(".to-top").addClass("show"):$(".to-top").removeClass("show")})),$(".to-top").click((function(){$("html, body").animate({scrollTop:0},400)})),document.querySelectorAll(".mobile-control__item-text"),function(){document.querySelector(".catalog__filters-list");var t=document.querySelectorAll(".catalog__item"),e=document.querySelectorAll(".catalog__filters-radio"),o=function(){t.forEach((function(t){!function(t){t.classList.contains("hidden")&&t.classList.remove("hidden")}(t)}))},i=function(e){!function(e){"all"===e?o():(o(),t.forEach((function(t){t.getAttribute("data-brand")!==e&&function(t){t.classList.contains("hidden")||t.classList.add("hidden")}(t)})))}(e.currentTarget.getAttribute("value"))};e.forEach((function(t){t.addEventListener("change",i)})),$(".catalog__select-block select").change((function(){var t=$(this).children("option:selected").text(),e=$(this).val();$(this).parent().prev().text(t),$(".catalog__item").addClass("hidden"),$(".catalog__item[data-brand="+e+"]").removeClass("hidden")}))}(),new Swiper(".device-card__slider-container",{watchOverflow:!0,pagination:{el:".swiper-pagination",clickable:!0}}),$(".header__nav-btn").click((function(){$(this).parents(".header__bar").toggleClass("js-opened")})),$(".mobile-control-mobile__item-top").click((function(){var t=$(".mobile-control-mobile__item-top.opened");t[0]!==$(this)[0]&&(t.removeClass("opened"),t.next().hide()),$(this).toggleClass("opened"),$(this).next().slideToggle()})),$(".questions__item-top").click((function(){$(this).toggleClass("opened"),$(this).next().slideToggle()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyIsInBob25lLW1hc2suanMiLCJzY3JvbGwuanMiLCJhcHAtc2xpZGVzLXRvZ2dsZS5qcyIsImNhdGFsb2cuanMiLCJkZXZpY2Utc2xpZGVyLmpzIiwiaGVhZGVyLmpzIiwibW9iaWxlLWNvbnRyb2wuanMiLCJxdWVzdGlvbnMuanMiXSwibmFtZXMiOlsic2NlbmVIZWFkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY2VuZVdvcmtzIiwiUGFyYWxsYXgiLCJ2aCIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsImNvbmNhdCIsImZ1bmMiLCJ0aW1lciIsIiRib2R5IiwiTW9kYWwiLCJ0cmlnZ2VyIiwibW9kYWwiLCJ0aGlzIiwib3ZlcmxheSIsImNsb3NlQnRuIiwib25PdmVybGF5Q2xpY2siLCJiaW5kIiwib25DbG9zZUNsaWNrIiwib25UcmlnZ2VyQ2xpY2siLCJhZGRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJwcm90b3R5cGUiLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2UiLCJyZW1vdmUiLCJlIiwidGFyZ2V0IiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImltIiwiSW5wdXRtYXNrIiwiZm9yRWFjaCIsIml0ZW0iLCJtYXNrIiwiJCIsImNsaWNrIiwiZWxlbWVudENsaWNrIiwiYXR0ciIsImRlc3RpbmF0aW9uIiwib2Zmc2V0IiwidG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInBhcmVudHMiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2Nyb2xsIiwiY2FyZHMiLCJyYWRpb3MiLCJzaG93QWxsQ2FyZHMiLCJjYXJkIiwiY29udGFpbnMiLCJzaG93Q2FyZCIsIm9uUmFkaW9DaGFuZ2UiLCJicmFuZCIsImdldEF0dHJpYnV0ZSIsImhpZGVDYXJkIiwicmVuZGVyQ2FyZHMiLCJjdXJyZW50VGFyZ2V0IiwicmFkaW8iLCJjaGFuZ2UiLCJ0ZXh0IiwiY2hpbGRyZW4iLCJ2YWx1ZSIsInZhbCIsInBhcmVudCIsInByZXYiLCJTd2lwZXIiLCJ3YXRjaE92ZXJmbG93IiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwidG9nZ2xlQ2xhc3MiLCIkb3BlbmVkSXRlbSIsIm5leHQiLCJoaWRlIiwic2xpZGVUb2dnbGUiXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FDQSxJQUFBQSxFQUFBQyxTQUFBQyxjQUFBLGVBR0FDLEdBRkEsSUFBQUMsU0FBQUosR0FFQUMsU0FBQUMsY0FBQSxzQkFDQSxJQUFBRSxTQUFBRCxHQUxBLEdDQUEsV0FDQSxJQUFBRSxFQUFBLElBQUFDLE9BQUFDLFlBQ0FOLFNBQUFPLGdCQUFBQyxNQUFBQyxZQUFBLE9BQUEsR0FBQUMsT0FBQU4sRUFBQSxPQUVBLElBRUFPLEVBQ0FDLEVBSEFDLEVBQUFiLFNBQUFDLGNBQUEsUUFpQkEsU0FBQWEsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQUYsUUFBQUEsRUFDQUUsS0FBQUQsTUFBQUEsRUFDQUMsS0FBQUMsUUFBQUQsS0FBQUQsTUFBQWYsY0FBQSxtQkFDQWdCLEtBQUFFLFNBQUFGLEtBQUFELE1BQUFmLGNBQUEsaUJBRUFnQixLQUFBRyxlQUFBSCxLQUFBRyxlQUFBQyxLQUFBSixNQUNBQSxLQUFBSyxhQUFBTCxLQUFBSyxhQUFBRCxLQUFBSixNQUNBQSxLQUFBTSxlQUFBTixLQUFBTSxlQUFBRixLQUFBSixNQUdBQSxLQUFBTyxvQkFiQW5CLE9BQUFvQixpQkFBQSxVQWJBZCxFQVFBLFdBQ0EsSUFBQVAsRUFBQSxJQUFBQyxPQUFBQyxZQUNBTixTQUFBTyxnQkFBQUMsTUFBQUMsWUFBQSxPQUFBLEdBQUFDLE9BQUFOLEVBQUEsUUFSQSxTQUFBc0IsR0FDQWQsR0FBQWUsYUFBQWYsR0FDQUEsRUFBQWdCLFdBQUFqQixFQUFBLElBQUFlLE1BeUJB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Z0JDRkF0QyxFQUFBLG9DQUFBQyxPQUFBLFdBQ0EsSUFBQXNDLEVBQUF2QyxFQUFBLDJDQUNBdUMsRUFBQSxLQUFBdkMsRUFBQTNCLE1BQUEsS0FDQWtFLEVBQUE3QixZQUFBLFVBQ0E2QixFQUFBQyxPQUFBQyxRQUdBekMsRUFBQTNCLE1BQUFpRSxZQUFBLFVBQ0F0QyxFQUFBM0IsTUFBQW1FLE9BQUFFLGlCQ1JBMUMsRUFBQSx3QkFBQUMsT0FBQSxXQUNBRCxFQUFBM0IsTUFBQWlFLFlBQUEsVUFDQXRDLEVBQUEzQixNQUFBbUUsT0FBQUUiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgc2NlbmVIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iZycpO1xuICB2YXIgaGVhZGVyUGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZUhlYWRlcik7XG4gIHZhciBzY2VuZVdvcmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvdy1pdC13b3Jrc19fYmcnKTtcbiAgdmFyIHdvcmtzUGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZVdvcmtzKTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIFwiXCIuY29uY2F0KHZoLCBcInB4XCIpKTtcbiAgdmFyICRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMpIHtcbiAgICB2YXIgdGltZXI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKHRpbWVyKSBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmMsIDEwMCwgZXZlbnQpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICB2YXIgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIFwiXCIuY29uY2F0KHZoLCBcInB4XCIpKTtcbiAgfVxuXG4gIDtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKG9uUmVzaXplKSk7XG5cbiAgZnVuY3Rpb24gTW9kYWwodHJpZ2dlciwgbW9kYWwpIHtcbiAgICB0aGlzLnRyaWdnZXIgPSB0cmlnZ2VyO1xuICAgIHRoaXMubW9kYWwgPSBtb2RhbDtcbiAgICB0aGlzLm92ZXJsYXkgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fb3ZlcmxheScpO1xuICAgIHRoaXMuY2xvc2VCdG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UnKTtcbiAgICB0aGlzLm9uT3ZlcmxheUNsaWNrID0gdGhpcy5vbk92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DbG9zZUNsaWNrID0gdGhpcy5vbkNsb3NlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVHJpZ2dlckNsaWNrID0gdGhpcy5vblRyaWdnZXJDbGljay5iaW5kKHRoaXMpOyAvL3RoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QuYWRkKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uT3ZlcmxheUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUub25DbG9zZUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUub25UcmlnZ2VyQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vcGVuKCk7XG4gIH07IC8vIE1vZGFsLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAvLyAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgLy8gICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIC8vIH07XG5cblxuICBNb2RhbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbk92ZXJsYXlDbGljayk7XG4gICAgdGhpcy5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbG9zZUNsaWNrKTtcbiAgICB0aGlzLnRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVHJpZ2dlckNsaWNrKTtcbiAgfTtcblxuICB3aW5kb3cuTW9kYWwgPSBNb2RhbDtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQtcGhvbmUnKTtcblxuICBpZiAoIWlucHV0c1swXSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBpbSA9IG5ldyBJbnB1dG1hc2soXCIrNyg5OTkpIDk5OS05OS05OVwiKTtcbiAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpbS5tYXNrKGl0ZW0pO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICQoXCJhLmhlYWRlcl9fbmF2LWxpbmtcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbGVtZW50Q2xpY2sgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSAkKGVsZW1lbnRDbGljaykub2Zmc2V0KCkudG9wIC0gODA7XG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgc2Nyb2xsVG9wOiBkZXN0aW5hdGlvblxuICAgIH0sIDQwMCk7XG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyX19iYXInKS5yZW1vdmVDbGFzcygnanMtb3BlbmVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiAgJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gODAwID8gJCgnLnRvLXRvcCcpLmFkZENsYXNzKCdzaG93JykgOiAkKCcudG8tdG9wJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDgwMCA/ICQoJy50by10b3AnKS5hZGRDbGFzcygnc2hvdycpIDogJCgnLnRvLXRvcCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gIH0pO1xuICAkKCcudG8tdG9wJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogMFxuICAgIH0sIDQwMCk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vYmlsZS1jb250cm9sX19pdGVtLXRleHQnKTtcblxuICB2YXIgb25JdGVtc0NsaWNrID0gZnVuY3Rpb24gb25JdGVtc0NsaWNrKGUpIHsvL2UucHJldmVudERlZmF1bHQoKTtcbiAgfTsgLy8gY29uc3Qgb25JdGVtT3ZlciA9IGZ1bmN0aW9uKGUpIHtcbiAgLy8gICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hvdmVyZWQnKTtcbiAgLy8gfVxuICAvLyBjb25zdCBvbkl0ZW1MZWF2ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgLy8gICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyZWQnKTtcbiAgLy8gfVxuICAvLyBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgLy8gICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25JdGVtc0NsaWNrKTtcbiAgLy8gICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBvbkl0ZW1PdmVyKTtcbiAgLy8gICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBvbkl0ZW1MZWF2ZSk7XG4gIC8vIH0pO1xuICAvLyAkKCdtb2JpbGUtY29udHJvbF9faXRlbS10ZXh0JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gIC8vICAgJCgnLm1vYmlsZS1jb250cm9sX19pdGVtLXRleHQnKS5yZW1vdmVDbGFzcyhobylcbiAgLy8gfSk7XG5cbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBmaWx0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtbGlzdCcpOyAvLyBjb25zdCBhbGxSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiYWxsXCJdJyk7XG4gIC8vIGNvbnN0IGRhaWNoaVJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJkYWljaGlcIl0nKTtcbiAgLy8gY29uc3QgZGFpa2luUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImRhaWtpblwiXScpO1xuICAvLyBjb25zdCBib3NjaFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJib3NjaFwiXScpO1xuICAvLyBjb25zdCBtaWRlYVJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJtaWRlYVwiXScpO1xuXG4gIHZhciBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nX19pdGVtJyk7XG4gIHZhciByYWRpb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpbycpOyAvLyBjb25zdCBmaW5kQ2hlY2tlZEJyYW5kID0gZnVuY3Rpb24oKSB7XG4gIC8vICAgbGV0IGJyYW5kID0gJyc7XG4gIC8vICAgcmFkaW9zLmZvckVhY2goZnVuY3Rpb24ocmFkaW8pIHtcbiAgLy8gICAgIGlmIChyYWRpby5jaGVja2VkKSB7XG4gIC8vICAgICAgIGJyYW5kID0gcmFkaW8uZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAvLyAgICAgfVxuICAvLyAgIH0pO1xuICAvLyAgIHJldHVybiBicmFuZDtcbiAgLy8gfTtcblxuICB2YXIgc2hvd0NhcmQgPSBmdW5jdGlvbiBzaG93Q2FyZChjYXJkKSB7XG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGhpZGVDYXJkID0gZnVuY3Rpb24gaGlkZUNhcmQoY2FyZCkge1xuICAgIGlmICghY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgc2hvd0FsbENhcmRzID0gZnVuY3Rpb24gc2hvd0FsbENhcmRzKCkge1xuICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24gKGNhcmQpIHtcbiAgICAgIHNob3dDYXJkKGNhcmQpO1xuICAgIH0pO1xuICB9OyAvLyBjb25zdCBoaWRlQWxsQ2FyZHMgPSBmdW5jdGlvbigpIHtcbiAgLy8gICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpIHtcbiAgLy8gICAgaGlkZUNhcmQoY2FyZCk7XG4gIC8vICAgfSlcbiAgLy8gfTtcblxuXG4gIHZhciByZW5kZXJDYXJkcyA9IGZ1bmN0aW9uIHJlbmRlckNhcmRzKGJyYW5kKSB7XG4gICAgaWYgKGJyYW5kID09PSAnYWxsJykge1xuICAgICAgc2hvd0FsbENhcmRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dBbGxDYXJkcygpO1xuICAgICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoY2FyZCkge1xuICAgICAgICBpZiAoY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnJhbmQnKSAhPT0gYnJhbmQpIHtcbiAgICAgICAgICBoaWRlQ2FyZChjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvblJhZGlvQ2hhbmdlID0gZnVuY3Rpb24gb25SYWRpb0NoYW5nZShlKSB7XG4gICAgdmFyIGJyYW5kID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICByZW5kZXJDYXJkcyhicmFuZCk7XG4gIH07XG5cbiAgcmFkaW9zLmZvckVhY2goZnVuY3Rpb24gKHJhZGlvKSB7XG4gICAgcmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25SYWRpb0NoYW5nZSk7XG4gIH0pO1xuICAkKCcuY2F0YWxvZ19fc2VsZWN0LWJsb2NrIHNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRleHQgPSAkKHRoaXMpLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcbiAgICAkKHRoaXMpLnBhcmVudCgpLnByZXYoKS50ZXh0KHRleHQpO1xuICAgICQoJy5jYXRhbG9nX19pdGVtJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICQoJy5jYXRhbG9nX19pdGVtW2RhdGEtYnJhbmQ9JyArIHZhbHVlICsgJ10nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5kZXZpY2UtY2FyZF9fc2xpZGVyLWNvbnRhaW5lcicsIHtcbiAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gICAgd2F0Y2hPdmVyZmxvdzogdHJ1ZSxcbiAgICAvL2xvb3A6IHRydWUsXG4gICAgLy8gSWYgd2UgbmVlZCBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgY2xpY2thYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICQoJy5oZWFkZXJfX25hdi1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyX19iYXInKS50b2dnbGVDbGFzcygnanMtb3BlbmVkJyk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgJCgnLm1vYmlsZS1jb250cm9sLW1vYmlsZV9faXRlbS10b3AnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRvcGVuZWRJdGVtID0gJCgnLm1vYmlsZS1jb250cm9sLW1vYmlsZV9faXRlbS10b3Aub3BlbmVkJyk7XG5cbiAgICBpZiAoJG9wZW5lZEl0ZW1bMF0gIT09ICQodGhpcylbMF0pIHtcbiAgICAgICRvcGVuZWRJdGVtLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICRvcGVuZWRJdGVtLm5leHQoKS5oaWRlKCk7XG4gICAgfVxuXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gICAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAkKCcucXVlc3Rpb25zX19pdGVtLXRvcCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgpO1xuICB9KTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgc2NlbmVIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iZycpO1xuICB2YXIgaGVhZGVyUGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZUhlYWRlcik7XG5cbiAgdmFyIHNjZW5lV29ya3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG93LWl0LXdvcmtzX19iZycpO1xuICB2YXIgd29ya3NQYXJhbGxheEluc3RhbmNlID0gbmV3IFBhcmFsbGF4KHNjZW5lV29ya3MpO1xufSkoKTtcbiIsIigoKSA9PiB7XG4gIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG5cbiAgY29uc3QgJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbiAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYyl7XG4gICAgdmFyIHRpbWVyO1xuICAgIHJldHVybiBmdW5jdGlvbihldmVudCl7XG4gICAgICBpZih0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLDEwMCxldmVudCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIH07XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKG9uUmVzaXplKSk7XG5cbiAgZnVuY3Rpb24gTW9kYWwgKHRyaWdnZXIsIG1vZGFsKSB7XG4gICAgdGhpcy50cmlnZ2VyID0gdHJpZ2dlcjtcbiAgICB0aGlzLm1vZGFsID0gbW9kYWw7XG4gICAgdGhpcy5vdmVybGF5ID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX292ZXJsYXknKTtcbiAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG5cbiAgICB0aGlzLm9uT3ZlcmxheUNsaWNrID0gdGhpcy5vbk92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DbG9zZUNsaWNrID0gdGhpcy5vbkNsb3NlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVHJpZ2dlckNsaWNrID0gdGhpcy5vblRyaWdnZXJDbGljay5iaW5kKHRoaXMpO1xuICAgIC8vdGhpcy5vblJlc2l6ZSA9IHRoaXMub25SZXNpemUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LmFkZCgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vbk92ZXJsYXlDbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vbkNsb3NlQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25UcmlnZ2VyQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9wZW4oKTtcbiAgfVxuXG4gIC8vIE1vZGFsLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAvLyAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgLy8gICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIC8vIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbk92ZXJsYXlDbGljayk7XG4gICAgdGhpcy5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbG9zZUNsaWNrKTtcbiAgICB0aGlzLnRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVHJpZ2dlckNsaWNrKTtcbiAgfVxuXG4gIHdpbmRvdy5Nb2RhbCA9IE1vZGFsO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgaWYgKCFpbnB1dHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBpbSA9IG5ldyBJbnB1dG1hc2soXCIrNyg5OTkpIDk5OS05OS05OVwiKTtcblxuICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgaW0ubWFzayhpdGVtKTtcbiAgfSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoXCJhLmhlYWRlcl9fbmF2LWxpbmtcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1lbnRDbGljayA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgIHZhciBkZXN0aW5hdGlvbiA9ICQoZWxlbWVudENsaWNrKS5vZmZzZXQoKS50b3AgLSA4MDtcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiBkZXN0aW5hdGlvbn0sIDQwMCk7XG5cbiAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXJfX2JhcicpLnJlbW92ZUNsYXNzKCdqcy1vcGVuZWQnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG4gICQod2luZG93KS5zY3JvbGxUb3AoKSA+IDgwMFxuICAgICAgPyAkKCcudG8tdG9wJykuYWRkQ2xhc3MoJ3Nob3cnKVxuICAgICAgOiAkKCcudG8tdG9wJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcblxuICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuc2Nyb2xsVG9wKCkgPiA4MDBcbiAgICAgID8gJCgnLnRvLXRvcCcpLmFkZENsYXNzKCdzaG93JylcbiAgICAgIDogJCgnLnRvLXRvcCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gIH0pO1xuXG4gICQoJy50by10b3AnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgNDAwKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtY29udHJvbF9faXRlbS10ZXh0Jyk7XG5cbiAgY29uc3Qgb25JdGVtc0NsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgLy8gY29uc3Qgb25JdGVtT3ZlciA9IGZ1bmN0aW9uKGUpIHtcbiAgLy8gICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hvdmVyZWQnKTtcbiAgLy8gfVxuXG4gIC8vIGNvbnN0IG9uSXRlbUxlYXZlID0gZnVuY3Rpb24oZSkge1xuICAvLyAgIGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgLy8gICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xuICAvLyB9XG5cbiAgLy8gaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uSXRlbXNDbGljayk7XG4gIC8vICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25JdGVtT3Zlcik7XG4gIC8vICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgb25JdGVtTGVhdmUpO1xuICAvLyB9KTtcblxuICAvLyAkKCdtb2JpbGUtY29udHJvbF9faXRlbS10ZXh0JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gIC8vICAgJCgnLm1vYmlsZS1jb250cm9sX19pdGVtLXRleHQnKS5yZW1vdmVDbGFzcyhobylcbiAgLy8gfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBmaWx0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtbGlzdCcpO1xuXG4gIC8vIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJhbGxcIl0nKTtcbiAgLy8gY29uc3QgZGFpY2hpUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImRhaWNoaVwiXScpO1xuICAvLyBjb25zdCBkYWlraW5SYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiZGFpa2luXCJdJyk7XG4gIC8vIGNvbnN0IGJvc2NoUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImJvc2NoXCJdJyk7XG4gIC8vIGNvbnN0IG1pZGVhUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cIm1pZGVhXCJdJyk7XG5cbiAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19faXRlbScpO1xuXG4gIGNvbnN0IHJhZGlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvJyk7XG5cbiAgLy8gY29uc3QgZmluZENoZWNrZWRCcmFuZCA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGxldCBicmFuZCA9ICcnO1xuICAvLyAgIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uKHJhZGlvKSB7XG4gIC8vICAgICBpZiAocmFkaW8uY2hlY2tlZCkge1xuICAvLyAgICAgICBicmFuZCA9IHJhZGlvLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcblxuICAvLyAgIHJldHVybiBicmFuZDtcbiAgLy8gfTtcblxuICBjb25zdCBzaG93Q2FyZCA9IGZ1bmN0aW9uKGNhcmQpIHtcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoaWRlQ2FyZCA9IGZ1bmN0aW9uKGNhcmQpIHtcbiAgICBpZiAoIWNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hvd0FsbENhcmRzID0gZnVuY3Rpb24oKSB7XG4gICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKSB7XG4gICAgICBzaG93Q2FyZChjYXJkKTtcbiAgICB9KVxuICB9O1xuXG4gIC8vIGNvbnN0IGhpZGVBbGxDYXJkcyA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24oY2FyZCkge1xuICAvLyAgICBoaWRlQ2FyZChjYXJkKTtcbiAgLy8gICB9KVxuICAvLyB9O1xuXG4gIGNvbnN0IHJlbmRlckNhcmRzID0gZnVuY3Rpb24oYnJhbmQpIHtcbiAgICBpZiAoYnJhbmQgPT09ICdhbGwnKSB7XG4gICAgICBzaG93QWxsQ2FyZHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0FsbENhcmRzKCk7XG4gICAgICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpIHtcbiAgICAgICAgaWYgKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLWJyYW5kJykgIT09IGJyYW5kKSB7XG4gICAgICAgICAgaGlkZUNhcmQoY2FyZCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uUmFkaW9DaGFuZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgYnJhbmQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAgIHJlbmRlckNhcmRzKGJyYW5kKTtcbiAgfTtcblxuICByYWRpb3MuZm9yRWFjaChmdW5jdGlvbihyYWRpbykge1xuICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uUmFkaW9DaGFuZ2UpO1xuICB9KTtcblxuXG4gICQoJy5jYXRhbG9nX19zZWxlY3QtYmxvY2sgc2VsZWN0JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRleHQgPSAkKHRoaXMpLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgICQodGhpcykucGFyZW50KCkucHJldigpLnRleHQodGV4dCk7XG5cbiAgICAkKCcuY2F0YWxvZ19faXRlbScpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICQoJy5jYXRhbG9nX19pdGVtW2RhdGEtYnJhbmQ9JyArIHZhbHVlICsgJ10nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgfSlcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcignLmRldmljZS1jYXJkX19zbGlkZXItY29udGFpbmVyJywge1xuICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB3YXRjaE92ZXJmbG93OiB0cnVlLFxuICAgIC8vbG9vcDogdHJ1ZSxcbiAgICAvLyBJZiB3ZSBuZWVkIHBhZ2luYXRpb25cbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgfSxcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICQoJy5oZWFkZXJfX25hdi1idG4nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXJfX2JhcicpLnRvZ2dsZUNsYXNzKCdqcy1vcGVuZWQnKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAkKCcubW9iaWxlLWNvbnRyb2wtbW9iaWxlX19pdGVtLXRvcCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0ICRvcGVuZWRJdGVtID0gJCgnLm1vYmlsZS1jb250cm9sLW1vYmlsZV9faXRlbS10b3Aub3BlbmVkJyk7XG4gICAgaWYgKCRvcGVuZWRJdGVtWzBdICE9PSAkKHRoaXMpWzBdKSB7XG4gICAgICAkb3BlbmVkSXRlbS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAkb3BlbmVkSXRlbS5uZXh0KCkuaGlkZSgpO1xuICAgIH1cblxuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICQodGhpcykubmV4dCgpLnNsaWRlVG9nZ2xlKCk7XG4gIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJCgnLnF1ZXN0aW9uc19faXRlbS10b3AnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgpO1xuICB9KTtcbn0pKCk7XG4iXX0=
