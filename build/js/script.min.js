"use strict";!function(){var e=document.querySelector(".how-it-works__bg");new Parallax(e)}(),function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"));var t,n,o=document.querySelector("body");function i(e,t){this.trigger=e,this.modal=t,this.overlay=this.modal.querySelector(".modal__overlay"),this.closeBtn=this.modal.querySelector(".modal__close"),this.onOverlayClick=this.onOverlayClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.addEventListeners()}window.addEventListener("resize",(t=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},function(e){n&&clearTimeout(n),n=setTimeout(t,100,e)})),i.prototype.open=function(){this.modal.classList.add("js-show"),o.classList.add("js__body-no-scroll")},i.prototype.close=function(){this.modal.classList.remove("js-show"),o.classList.remove("js__body-no-scroll")},i.prototype.onOverlayClick=function(e){e.target===this.overlay&&this.close()},i.prototype.onCloseClick=function(){this.close()},i.prototype.onTriggerClick=function(){this.open()},i.prototype.addEventListeners=function(){this.overlay.addEventListener("click",this.onOverlayClick),this.closeBtn.addEventListener("click",this.onCloseClick),this.trigger.addEventListener("click",this.onTriggerClick)},window.Modal=i}(),function(){var e=document.querySelectorAll(".input-phone");if(e[0]){var t=new Inputmask("+7(999) 999-99-99");e.forEach((function(e){t.mask(e)}))}}(),function(){var e=document.querySelectorAll(".mobile-control__item-text"),t=function(e){e.preventDefault()},n=function(e){e.currentTarget.classList.add("hovered")},o=function(e){e.currentTarget.classList.remove("hovered")};e.forEach((function(e){e.addEventListener("click",t),e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",o)}))}(),function(){document.querySelector(".catalog__filters-list");var e=document.querySelectorAll(".catalog__item"),t=document.querySelectorAll(".catalog__filters-radio"),n=function(){e.forEach((function(e){!function(e){e.classList.contains("hidden")&&e.classList.remove("hidden")}(e)}))},o=function(t){!function(t){"all"===t?n():(n(),e.forEach((function(e){e.getAttribute("data-brand")!==t&&function(e){e.classList.contains("hidden")||e.classList.add("hidden")}(e)})))}(t.currentTarget.getAttribute("value"))};t.forEach((function(e){e.addEventListener("change",o)}))}(),function(){var e=document.querySelector(".header__bar-mobile");if(e){var t=window.pageYOffset>100,n=function(){!e.classList.contains("opened")&&e.classList.add("opened")};t&&n(),document.addEventListener("scroll",(function(){!t&&window.pageYOffset>100&&(n(),t=!0),t&&window.pageYOffset<100&&(e.classList.contains("opened")&&e.classList.remove("opened"),t=!1)}))}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyIsInBob25lLW1hc2suanMiLCJhcHAtc2xpZGVzLXRvZ2dsZS5qcyIsImNhdGFsb2cuanMiLCJoZWFkZXIuanMiXSwibmFtZXMiOlsic2NlbmUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJQYXJhbGxheCIsInZoIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsInNldFByb3BlcnR5IiwiY29uY2F0IiwiZnVuYyIsInRpbWVyIiwiJGJvZHkiLCJNb2RhbCIsInRyaWdnZXIiLCJtb2RhbCIsInRoaXMiLCJvdmVybGF5IiwiY2xvc2VCdG4iLCJvbk92ZXJsYXlDbGljayIsImJpbmQiLCJvbkNsb3NlQ2xpY2siLCJvblRyaWdnZXJDbGljayIsImFkZEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInByb3RvdHlwZSIsIm9wZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZSIsInJlbW92ZSIsImUiLCJ0YXJnZXQiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW0iLCJJbnB1dG1hc2siLCJmb3JFYWNoIiwiaXRlbSIsIm1hc2siLCJpdGVtcyIsIm9uSXRlbXNDbGljayIsInByZXZlbnREZWZhdWx0Iiwib25JdGVtT3ZlciIsImN1cnJlbnRUYXJnZXQiLCJvbkl0ZW1MZWF2ZSIsImNhcmRzIiwicmFkaW9zIiwic2hvd0FsbENhcmRzIiwiY2FyZCIsImNvbnRhaW5zIiwic2hvd0NhcmQiLCJvblJhZGlvQ2hhbmdlIiwiYnJhbmQiLCJnZXRBdHRyaWJ1dGUiLCJoaWRlQ2FyZCIsInJlbmRlckNhcmRzIiwicmFkaW8iLCJoZWFkZXJCYXIiLCJpc1Njcm9sbGVkIiwicGFnZVlPZmZzZXQiLCJzaG93SGVhZGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxjQ0FBLFdBQ0EsSUFBQUEsRUFBQUMsU0FBQUMsY0FBQSxxQkFDQSxJQUFBQyxTQUFBSCxHQUZBLEdDQUEsV0FDQSxJQUFBSSxFQUFBLElBQUFDLE9BQUFDLFlBQ0FMLFNBQUFNLGdCQUFBQyxNQUFBQyxZQUFBLE9BQUEsR0FBQUMsT0FBQU4sRUFBQSxPQUVBLElBRUFPLEVBQ0FDLEVBSEFDLEVBQUFaLFNBQUFDLGNBQUEsUUFpQkEsU0FBQVksRUFBQUMsRUFBQUMsR0FDQUMsS0FBQUYsUUFBQUEsRUFDQUUsS0FBQUQsTUFBQUEsRUFDQUMsS0FBQUMsUUFBQUQsS0FBQUQsTUFBQWQsY0FBQSxtQkFDQWUsS0FBQUUsU0FBQUYsS0FBQUQsTUFBQWQsY0FBQSxpQkFFQWUsS0FBQUcsZUFBQUgsS0FBQUcsZUFBQUMsS0FBQUosTUFDQUEsS0FBQUssYUFBQUwsS0FBQUssYUFBQUQsS0FBQUosTUFDQUEsS0FBQU0sZUFBQU4sS0FBQU0sZUFBQUYsS0FBQUosTUFHQUEsS0FBQU8sb0JBYkFuQixPQUFBb0IsaUJBQUEsVUFiQWQsRUFRQSxXQUNBLElBQUFQLEVBQUEsSUFBQUMsT0FBQUMsWUFDQUwsU0FBQU0sZ0JBQUFDLE1BQUFDLFlBQUEsT0FBQSxHQUFBQyxPQUFBTixFQUFBLFFBUkEsU0FBQXNCLEdBQ0FkLEdBQUFlLGFBQUFmLEdBQ0FBLEVBQUFnQixXQUFBakIsRUFBQSxJQUFBZSxNQXlCQVosRUFBQWUsVUFBQUMsS0FBQSxXQUNBYixLQUFBRCxNQUFBZSxVQUFBQyxJQUFBLFdBQ0FuQixFQUFBa0IsVUFBQUMsSUFBQSx1QkFHQWxCLEVBQUFlLFVBQUFJLE1BQUEsV0FDQWhCLEtBQUFELE1BQUFlLFVBQUFHLE9BQUEsV0FDQXJCLEVBQUFrQixVQUFBRyxPQUFBLHVCQUdBcEIsRUFBQWUsVUFBQVQsZUFBQSxTQUFBZSxHQUNBQSxFQUFBQyxTQUFBbkIsS0FBQUMsU0FDQUQsS0FBQWdCLFNBSUFuQixFQUFBZSxVQUFBUCxhQUFBLFdBQ0FMLEtBQUFnQixTQUdBbkIsRUFBQWUsVUFBQU4sZUFBQSxXQUNBTixLQUFBYSxRQVFBaEIsRUFBQWUsVUFBQUwsa0JBQUEsV0FDQVAsS0FBQUMsUUFBQU8saUJBQUEsUUFBQVIsS0FBQUcsZ0JBQ0FILEtBQUFFLFNBQUFNLGlCQUFBLFFBQUFSLEtBQUFLLGNBQ0FMLEtBQUFGLFFBQUFVLGlCQUFBLFFBQUFSLEtBQUFNLGlCQUdBbEIsT0FBQVMsTUFBQUEsRUF0RUEsR0NBQSxXQUNBLElBQUF1QixFQUFBcEMsU0FBQXFDLGlCQUFBLGdCQUVBLEdBQUFELEVBQUEsR0FBQSxDQUlBLElBQUFFLEVBQUEsSUFBQUMsVUFBQSxxQkFFQUgsRUFBQUksU0FBQSxTQUFBQyxHQUNBSCxFQUFBSSxLQUFBRCxPQVZBLEdDQUEsV0FDQSxJQUFBRSxFQUFBM0MsU0FBQXFDLGlCQUFBLDhCQUVBTyxFQUFBLFNBQUFWLEdBQ0FBLEVBQUFXLGtCQUdBQyxFQUFBLFNBQUFaLEdBQ0FBLEVBQUFhLGNBQ0FqQixVQUFBQyxJQUFBLFlBR0FpQixFQUFBLFNBQUFkLEdBQ0FBLEVBQUFhLGNBQ0FqQixVQUFBRyxPQUFBLFlBR0FVLEVBQUFILFNBQUEsU0FBQUMsR0FDQUEsRUFBQWpCLGlCQUFBLFFBQUFvQixHQUNBSCxFQUFBakIsaUJBQUEsYUFBQXNCLEdBQ0FMLEVBQUFqQixpQkFBQSxhQUFBd0IsTUFwQkEsR0NBQSxXQUNBaEQsU0FBQUMsY0FBQSwwQkFBQSxJQVFBZ0QsRUFBQWpELFNBQUFxQyxpQkFBQSxrQkFFQWEsRUFBQWxELFNBQUFxQyxpQkFBQSwyQkF5QkFjLEVBQUEsV0FDQUYsRUFBQVQsU0FBQSxTQUFBWSxJQWJBLFNBQUFBLEdBQ0FBLEVBQUF0QixVQUFBdUIsU0FBQSxXQUNBRCxFQUFBdEIsVUFBQUcsT0FBQSxVQVlBcUIsQ0FBQUYsT0F1QkFHLEVBQUEsU0FBQXJCLElBYkEsU0FBQXNCLEdBQ0EsUUFBQUEsRUFDQUwsS0FFQUEsSUFDQUYsRUFBQVQsU0FBQSxTQUFBWSxHQUNBQSxFQUFBSyxhQUFBLGdCQUFBRCxHQXhCQSxTQUFBSixHQUNBQSxFQUFBdEIsVUFBQXVCLFNBQUEsV0FDQUQsRUFBQXRCLFVBQUFDLElBQUEsVUF1QkEyQixDQUFBTixPQVFBTyxDQURBekIsRUFBQWEsY0FBQVUsYUFBQSxXQUlBUCxFQUFBVixTQUFBLFNBQUFvQixHQUNBQSxFQUFBcEMsaUJBQUEsU0FBQStCLE1BbkVBLEdDQUEsV0FDQSxJQUFBTSxFQUFBN0QsU0FBQUMsY0FBQSx1QkFFQSxHQUFBNEQsRUFBQSxDQUlBLElBQUFDLEVBQUExRCxPQUFBMkQsWUFBQSxJQUVBQyxFQUFBLFlBQ0FILEVBQUEvQixVQUFBdUIsU0FBQSxXQUNBUSxFQUFBL0IsVUFBQUMsSUFBQSxXQW9CQStCLEdBQ0FFLElBR0FoRSxTQUFBd0IsaUJBQUEsVUFoQkEsWUFDQXNDLEdBQUExRCxPQUFBMkQsWUFBQSxNQUNBQyxJQUNBRixHQUFBLEdBR0FBLEdBQUExRCxPQUFBMkQsWUFBQSxNQVZBRixFQUFBL0IsVUFBQXVCLFNBQUEsV0FDQVEsRUFBQS9CLFVBQUFHLE9BQUEsVUFXQTZCLEdBQUEsT0EzQkEiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgc2NlbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG93LWl0LXdvcmtzX19iZycpO1xuICB2YXIgcGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBcIlwiLmNvbmNhdCh2aCwgXCJweFwiKSk7XG4gIHZhciAkYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jKSB7XG4gICAgdmFyIHRpbWVyO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICh0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLCAxMDAsIGV2ZW50KTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgdmFyIHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBcIlwiLmNvbmNhdCh2aCwgXCJweFwiKSk7XG4gIH1cblxuICA7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShvblJlc2l6ZSkpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsKHRyaWdnZXIsIG1vZGFsKSB7XG4gICAgdGhpcy50cmlnZ2VyID0gdHJpZ2dlcjtcbiAgICB0aGlzLm1vZGFsID0gbW9kYWw7XG4gICAgdGhpcy5vdmVybGF5ID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX292ZXJsYXknKTtcbiAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTsgLy90aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LmFkZCgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnanMtc2hvdycpO1xuICAgICRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2pzX19ib2R5LW5vLXNjcm9sbCcpO1xuICB9O1xuXG4gIE1vZGFsLnByb3RvdHlwZS5vbk92ZXJsYXlDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uQ2xvc2VDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uVHJpZ2dlckNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3BlbigpO1xuICB9OyAvLyBNb2RhbC5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgLy8gICAgIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIC8vICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuICAvLyB9O1xuXG5cbiAgTW9kYWwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25PdmVybGF5Q2xpY2spO1xuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VDbGljayk7XG4gICAgdGhpcy50cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblRyaWdnZXJDbGljayk7XG4gIH07XG5cbiAgd2luZG93Lk1vZGFsID0gTW9kYWw7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgaWYgKCFpbnB1dHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG4gIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaW0ubWFzayhpdGVtKTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9iaWxlLWNvbnRyb2xfX2l0ZW0tdGV4dCcpO1xuXG4gIHZhciBvbkl0ZW1zQ2xpY2sgPSBmdW5jdGlvbiBvbkl0ZW1zQ2xpY2soZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICB2YXIgb25JdGVtT3ZlciA9IGZ1bmN0aW9uIG9uSXRlbU92ZXIoZSkge1xuICAgIHZhciB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hvdmVyZWQnKTtcbiAgfTtcblxuICB2YXIgb25JdGVtTGVhdmUgPSBmdW5jdGlvbiBvbkl0ZW1MZWF2ZShlKSB7XG4gICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xuICB9O1xuXG4gIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25JdGVtc0NsaWNrKTtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBvbkl0ZW1PdmVyKTtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBvbkl0ZW1MZWF2ZSk7XG4gIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGZpbHRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1saXN0Jyk7IC8vIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJhbGxcIl0nKTtcbiAgLy8gY29uc3QgZGFpY2hpUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImRhaWNoaVwiXScpO1xuICAvLyBjb25zdCBkYWlraW5SYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiZGFpa2luXCJdJyk7XG4gIC8vIGNvbnN0IGJvc2NoUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImJvc2NoXCJdJyk7XG4gIC8vIGNvbnN0IG1pZGVhUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cIm1pZGVhXCJdJyk7XG5cbiAgdmFyIGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2dfX2l0ZW0nKTtcbiAgdmFyIHJhZGlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvJyk7IC8vIGNvbnN0IGZpbmRDaGVja2VkQnJhbmQgPSBmdW5jdGlvbigpIHtcbiAgLy8gICBsZXQgYnJhbmQgPSAnJztcbiAgLy8gICByYWRpb3MuZm9yRWFjaChmdW5jdGlvbihyYWRpbykge1xuICAvLyAgICAgaWYgKHJhZGlvLmNoZWNrZWQpIHtcbiAgLy8gICAgICAgYnJhbmQgPSByYWRpby5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gIC8vICAgICB9XG4gIC8vICAgfSk7XG4gIC8vICAgcmV0dXJuIGJyYW5kO1xuICAvLyB9O1xuXG4gIHZhciBzaG93Q2FyZCA9IGZ1bmN0aW9uIHNob3dDYXJkKGNhcmQpIHtcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGlkZUNhcmQgPSBmdW5jdGlvbiBoaWRlQ2FyZChjYXJkKSB7XG4gICAgaWYgKCFjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzaG93QWxsQ2FyZHMgPSBmdW5jdGlvbiBzaG93QWxsQ2FyZHMoKSB7XG4gICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoY2FyZCkge1xuICAgICAgc2hvd0NhcmQoY2FyZCk7XG4gICAgfSk7XG4gIH07IC8vIGNvbnN0IGhpZGVBbGxDYXJkcyA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24oY2FyZCkge1xuICAvLyAgICBoaWRlQ2FyZChjYXJkKTtcbiAgLy8gICB9KVxuICAvLyB9O1xuXG5cbiAgdmFyIHJlbmRlckNhcmRzID0gZnVuY3Rpb24gcmVuZGVyQ2FyZHMoYnJhbmQpIHtcbiAgICBpZiAoYnJhbmQgPT09ICdhbGwnKSB7XG4gICAgICBzaG93QWxsQ2FyZHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0FsbENhcmRzKCk7XG4gICAgICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uIChjYXJkKSB7XG4gICAgICAgIGlmIChjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1icmFuZCcpICE9PSBicmFuZCkge1xuICAgICAgICAgIGhpZGVDYXJkKGNhcmQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uUmFkaW9DaGFuZ2UgPSBmdW5jdGlvbiBvblJhZGlvQ2hhbmdlKGUpIHtcbiAgICB2YXIgYnJhbmQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAgIHJlbmRlckNhcmRzKGJyYW5kKTtcbiAgfTtcblxuICByYWRpb3MuZm9yRWFjaChmdW5jdGlvbiAocmFkaW8pIHtcbiAgICByYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvblJhZGlvQ2hhbmdlKTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgaGVhZGVyQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFyLW1vYmlsZScpO1xuXG4gIGlmICghaGVhZGVyQmFyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGlzU2Nyb2xsZWQgPSB3aW5kb3cucGFnZVlPZmZzZXQgPiAxMDA7XG5cbiAgdmFyIHNob3dIZWFkZXIgPSBmdW5jdGlvbiBzaG93SGVhZGVyKCkge1xuICAgICFoZWFkZXJCYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKSAmJiBoZWFkZXJCYXIuY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gIH07XG5cbiAgdmFyIGhpZGVIZWFkZXIgPSBmdW5jdGlvbiBoaWRlSGVhZGVyKCkge1xuICAgIGhlYWRlckJhci5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW5lZCcpICYmIGhlYWRlckJhci5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgfTtcblxuICB2YXIgb25TY3JvbGwgPSBmdW5jdGlvbiBvblNjcm9sbCgpIHtcbiAgICBpZiAoIWlzU2Nyb2xsZWQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0ID4gMTAwKSB7XG4gICAgICBzaG93SGVhZGVyKCk7XG4gICAgICBpc1Njcm9sbGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPCAxMDApIHtcbiAgICAgIGhpZGVIZWFkZXIoKTtcbiAgICAgIGlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGlzU2Nyb2xsZWQpIHtcbiAgICBzaG93SGVhZGVyKCk7XG4gIH1cblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgdmFyIHNjZW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvdy1pdC13b3Jrc19fYmcnKTtcbiAgdmFyIHBhcmFsbGF4SW5zdGFuY2UgPSBuZXcgUGFyYWxsYXgoc2NlbmUpO1xufSkoKTtcbiIsIigoKSA9PiB7XG4gIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG5cbiAgY29uc3QgJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbiAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYyl7XG4gICAgdmFyIHRpbWVyO1xuICAgIHJldHVybiBmdW5jdGlvbihldmVudCl7XG4gICAgICBpZih0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLDEwMCxldmVudCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIH07XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKG9uUmVzaXplKSk7XG5cbiAgZnVuY3Rpb24gTW9kYWwgKHRyaWdnZXIsIG1vZGFsKSB7XG4gICAgdGhpcy50cmlnZ2VyID0gdHJpZ2dlcjtcbiAgICB0aGlzLm1vZGFsID0gbW9kYWw7XG4gICAgdGhpcy5vdmVybGF5ID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX292ZXJsYXknKTtcbiAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG5cbiAgICB0aGlzLm9uT3ZlcmxheUNsaWNrID0gdGhpcy5vbk92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DbG9zZUNsaWNrID0gdGhpcy5vbkNsb3NlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVHJpZ2dlckNsaWNrID0gdGhpcy5vblRyaWdnZXJDbGljay5iaW5kKHRoaXMpO1xuICAgIC8vdGhpcy5vblJlc2l6ZSA9IHRoaXMub25SZXNpemUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LmFkZCgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vbk92ZXJsYXlDbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vbkNsb3NlQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25UcmlnZ2VyQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9wZW4oKTtcbiAgfVxuXG4gIC8vIE1vZGFsLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAvLyAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgLy8gICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIC8vIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbk92ZXJsYXlDbGljayk7XG4gICAgdGhpcy5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbG9zZUNsaWNrKTtcbiAgICB0aGlzLnRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVHJpZ2dlckNsaWNrKTtcbiAgfVxuXG4gIHdpbmRvdy5Nb2RhbCA9IE1vZGFsO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LXBob25lJyk7XG5cbiAgaWYgKCFpbnB1dHNbMF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBpbSA9IG5ldyBJbnB1dG1hc2soXCIrNyg5OTkpIDk5OS05OS05OVwiKTtcblxuICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgaW0ubWFzayhpdGVtKTtcbiAgfSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vYmlsZS1jb250cm9sX19pdGVtLXRleHQnKTtcblxuICBjb25zdCBvbkl0ZW1zQ2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgY29uc3Qgb25JdGVtT3ZlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hvdmVyZWQnKTtcbiAgfVxuXG4gIGNvbnN0IG9uSXRlbUxlYXZlID0gZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xuICB9XG5cbiAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uSXRlbXNDbGljayk7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgb25JdGVtT3Zlcik7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgb25JdGVtTGVhdmUpO1xuICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGZpbHRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1saXN0Jyk7XG5cbiAgLy8gY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImFsbFwiXScpO1xuICAvLyBjb25zdCBkYWljaGlSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiZGFpY2hpXCJdJyk7XG4gIC8vIGNvbnN0IGRhaWtpblJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJkYWlraW5cIl0nKTtcbiAgLy8gY29uc3QgYm9zY2hSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiYm9zY2hcIl0nKTtcbiAgLy8gY29uc3QgbWlkZWFSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwibWlkZWFcIl0nKTtcblxuICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nX19pdGVtJyk7XG5cbiAgY29uc3QgcmFkaW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW8nKTtcblxuICAvLyBjb25zdCBmaW5kQ2hlY2tlZEJyYW5kID0gZnVuY3Rpb24oKSB7XG4gIC8vICAgbGV0IGJyYW5kID0gJyc7XG4gIC8vICAgcmFkaW9zLmZvckVhY2goZnVuY3Rpb24ocmFkaW8pIHtcbiAgLy8gICAgIGlmIChyYWRpby5jaGVja2VkKSB7XG4gIC8vICAgICAgIGJyYW5kID0gcmFkaW8uZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAvLyAgICAgfVxuICAvLyAgIH0pO1xuXG4gIC8vICAgcmV0dXJuIGJyYW5kO1xuICAvLyB9O1xuXG4gIGNvbnN0IHNob3dDYXJkID0gZnVuY3Rpb24oY2FyZCkge1xuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhpZGVDYXJkID0gZnVuY3Rpb24oY2FyZCkge1xuICAgIGlmICghY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaG93QWxsQ2FyZHMgPSBmdW5jdGlvbigpIHtcbiAgICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpIHtcbiAgICAgIHNob3dDYXJkKGNhcmQpO1xuICAgIH0pXG4gIH07XG5cbiAgLy8gY29uc3QgaGlkZUFsbENhcmRzID0gZnVuY3Rpb24oKSB7XG4gIC8vICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKSB7XG4gIC8vICAgIGhpZGVDYXJkKGNhcmQpO1xuICAvLyAgIH0pXG4gIC8vIH07XG5cbiAgY29uc3QgcmVuZGVyQ2FyZHMgPSBmdW5jdGlvbihicmFuZCkge1xuICAgIGlmIChicmFuZCA9PT0gJ2FsbCcpIHtcbiAgICAgIHNob3dBbGxDYXJkcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93QWxsQ2FyZHMoKTtcbiAgICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24oY2FyZCkge1xuICAgICAgICBpZiAoY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnJhbmQnKSAhPT0gYnJhbmQpIHtcbiAgICAgICAgICBoaWRlQ2FyZChjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25SYWRpb0NoYW5nZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCBicmFuZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgcmVuZGVyQ2FyZHMoYnJhbmQpO1xuICB9O1xuXG4gIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uKHJhZGlvKSB7XG4gICAgcmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25SYWRpb0NoYW5nZSk7XG4gIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBoZWFkZXJCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iYXItbW9iaWxlJyk7XG5cbiAgaWYgKCFoZWFkZXJCYXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaXNTY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldCA+IDEwMDtcblxuICBjb25zdCBzaG93SGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgIWhlYWRlckJhci5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW5lZCcpXG4gICAgJiYgaGVhZGVyQmFyLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICB9XG5cbiAgY29uc3QgaGlkZUhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGhlYWRlckJhci5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW5lZCcpXG4gICAgJiYgaGVhZGVyQmFyLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICB9XG5cbiAgY29uc3Qgb25TY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIWlzU2Nyb2xsZWQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0ID4gMTAwKSB7XG4gICAgICBzaG93SGVhZGVyKCk7XG4gICAgICBpc1Njcm9sbGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPCAxMDApIHtcbiAgICAgIGhpZGVIZWFkZXIoKTtcbiAgICAgIGlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNTY3JvbGxlZCkge1xuICAgIHNob3dIZWFkZXIoKTtcbiAgfVxuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcbn0pKCk7XG4iXX0=
