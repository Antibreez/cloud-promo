"use strict";!function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"));var t,n,o=document.querySelector("body");function i(e,t){this.trigger=e,this.modal=t,this.overlay=this.modal.querySelector(".modal__overlay"),this.closeBtn=this.modal.querySelector(".modal__close"),this.onOverlayClick=this.onOverlayClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.addEventListeners()}window.addEventListener("resize",(t=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},function(e){n&&clearTimeout(n),n=setTimeout(t,100,e)})),i.prototype.open=function(){this.modal.classList.add("js-show"),o.classList.add("js__body-no-scroll")},i.prototype.close=function(){this.modal.classList.remove("js-show"),o.classList.remove("js__body-no-scroll")},i.prototype.onOverlayClick=function(e){e.target===this.overlay&&this.close()},i.prototype.onCloseClick=function(){this.close()},i.prototype.onTriggerClick=function(){this.open()},i.prototype.addEventListeners=function(){this.overlay.addEventListener("click",this.onOverlayClick),this.closeBtn.addEventListener("click",this.onCloseClick),this.trigger.addEventListener("click",this.onTriggerClick)},window.Modal=i}(),function(){var e=document.querySelectorAll(".input-phone");if(e[0]){var t=new Inputmask("+7(999) 999-99-99");e.forEach((function(e){t.mask(e)}))}}(),function(){var e=document.querySelectorAll(".mobile-control__item-text"),t=function(e){e.preventDefault()},n=function(e){e.currentTarget.classList.add("hovered")},o=function(e){e.currentTarget.classList.remove("hovered")};e.forEach((function(e){e.addEventListener("click",t),e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",o)}))}(),function(){document.querySelector(".catalog__filters-list");var e=document.querySelectorAll(".catalog__item"),t=document.querySelectorAll(".catalog__filters-radio"),n=function(){e.forEach((function(e){!function(e){e.classList.contains("hidden")&&e.classList.remove("hidden")}(e)}))},o=function(t){!function(t){"all"===t?n():(n(),e.forEach((function(e){e.getAttribute("data-brand")!==t&&function(e){e.classList.contains("hidden")||e.classList.add("hidden")}(e)})))}(t.currentTarget.getAttribute("value"))};t.forEach((function(e){e.addEventListener("change",o)}))}(),function(){var e=document.querySelector(".header__bar-mobile"),t=window.pageYOffset>100,n=function(){!e.classList.contains("opened")&&e.classList.add("opened")};t&&n(),document.addEventListener("scroll",(function(){!t&&window.pageYOffset>100&&(n(),t=!0),t&&window.pageYOffset<100&&(e.classList.contains("opened")&&e.classList.remove("opened"),t=!1)}))}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsIm1vZGFsLmpzIiwicGhvbmUtbWFzay5qcyIsImFwcC1zbGlkZXMtdG9nZ2xlLmpzIiwiY2F0YWxvZy5qcyIsImhlYWRlci5qcyJdLCJuYW1lcyI6WyJ2aCIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsInNldFByb3BlcnR5IiwiY29uY2F0IiwiZnVuYyIsInRpbWVyIiwiJGJvZHkiLCJxdWVyeVNlbGVjdG9yIiwiTW9kYWwiLCJ0cmlnZ2VyIiwibW9kYWwiLCJ0aGlzIiwib3ZlcmxheSIsImNsb3NlQnRuIiwib25PdmVybGF5Q2xpY2siLCJiaW5kIiwib25DbG9zZUNsaWNrIiwib25UcmlnZ2VyQ2xpY2siLCJhZGRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJwcm90b3R5cGUiLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2UiLCJyZW1vdmUiLCJlIiwidGFyZ2V0IiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImltIiwiSW5wdXRtYXNrIiwiZm9yRWFjaCIsIml0ZW0iLCJtYXNrIiwiaXRlbXMiLCJvbkl0ZW1zQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsIm9uSXRlbU92ZXIiLCJjdXJyZW50VGFyZ2V0Iiwib25JdGVtTGVhdmUiLCJjYXJkcyIsInJhZGlvcyIsInNob3dBbGxDYXJkcyIsImNhcmQiLCJjb250YWlucyIsInNob3dDYXJkIiwib25SYWRpb0NoYW5nZSIsImJyYW5kIiwiZ2V0QXR0cmlidXRlIiwiaGlkZUNhcmQiLCJyZW5kZXJDYXJkcyIsInJhZGlvIiwiaGVhZGVyQmFyIiwiaXNTY3JvbGxlZCIsInBhZ2VZT2Zmc2V0Iiwic2hvd0hlYWRlciJdLCJtYXBwaW5ncyI6IkFBQUEsY0NBQSxXQUNBLElBQUFBLEVBQUEsSUFBQUMsT0FBQUMsWUFDQUMsU0FBQUMs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QUFwQyxpQkFBQSxTQUFBK0IsTUFuRUEsR0NBQSxXQUNBLElBQUFNLEVBQUF6RCxTQUFBUSxjQUFBLHVCQUVBa0QsRUFBQTVELE9BQUE2RCxZQUFBLElBRUFDLEVBQUEsWUFDQUgsRUFBQS9CLFVBQUF1QixTQUFBLFdBQ0FRLEVBQUEvQixVQUFBQyxJQUFBLFdBb0JBK0IsR0FDQUUsSUFHQTVELFNBQUFvQixpQkFBQSxVQWhCQSxZQUNBc0MsR0FBQTVELE9BQUE2RCxZQUFBLE1BQ0FDLElBQ0FGLEdBQUEsR0FHQUEsR0FBQTVELE9BQUE2RCxZQUFBLE1BVkFGLEVBQUEvQixVQUFBdUIsU0FBQSxXQUNBUSxFQUFBL0IsVUFBQUcsT0FBQSxVQVdBNkIsR0FBQSxNQXZCQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIFwiXCIuY29uY2F0KHZoLCBcInB4XCIpKTtcbiAgdmFyICRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMpIHtcbiAgICB2YXIgdGltZXI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKHRpbWVyKSBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmMsIDEwMCwgZXZlbnQpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICB2YXIgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIFwiXCIuY29uY2F0KHZoLCBcInB4XCIpKTtcbiAgfVxuXG4gIDtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKG9uUmVzaXplKSk7XG5cbiAgZnVuY3Rpb24gTW9kYWwodHJpZ2dlciwgbW9kYWwpIHtcbiAgICB0aGlzLnRyaWdnZXIgPSB0cmlnZ2VyO1xuICAgIHRoaXMubW9kYWwgPSBtb2RhbDtcbiAgICB0aGlzLm92ZXJsYXkgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fb3ZlcmxheScpO1xuICAgIHRoaXMuY2xvc2VCdG4gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UnKTtcbiAgICB0aGlzLm9uT3ZlcmxheUNsaWNrID0gdGhpcy5vbk92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DbG9zZUNsaWNrID0gdGhpcy5vbkNsb3NlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVHJpZ2dlckNsaWNrID0gdGhpcy5vblRyaWdnZXJDbGljay5iaW5kKHRoaXMpOyAvL3RoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QuYWRkKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uT3ZlcmxheUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUub25DbG9zZUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUub25UcmlnZ2VyQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vcGVuKCk7XG4gIH07IC8vIE1vZGFsLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAvLyAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgLy8gICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG4gIC8vIH07XG5cblxuICBNb2RhbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbk92ZXJsYXlDbGljayk7XG4gICAgdGhpcy5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbG9zZUNsaWNrKTtcbiAgICB0aGlzLnRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVHJpZ2dlckNsaWNrKTtcbiAgfTtcblxuICB3aW5kb3cuTW9kYWwgPSBNb2RhbDtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQtcGhvbmUnKTtcblxuICBpZiAoIWlucHV0c1swXSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBpbSA9IG5ldyBJbnB1dG1hc2soXCIrNyg5OTkpIDk5OS05OS05OVwiKTtcbiAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpbS5tYXNrKGl0ZW0pO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtY29udHJvbF9faXRlbS10ZXh0Jyk7XG5cbiAgdmFyIG9uSXRlbXNDbGljayA9IGZ1bmN0aW9uIG9uSXRlbXNDbGljayhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuXG4gIHZhciBvbkl0ZW1PdmVyID0gZnVuY3Rpb24gb25JdGVtT3ZlcihlKSB7XG4gICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnaG92ZXJlZCcpO1xuICB9O1xuXG4gIHZhciBvbkl0ZW1MZWF2ZSA9IGZ1bmN0aW9uIG9uSXRlbUxlYXZlKGUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcmVkJyk7XG4gIH07XG5cbiAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkl0ZW1zQ2xpY2spO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIG9uSXRlbU92ZXIpO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG9uSXRlbUxlYXZlKTtcbiAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgZmlsdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLWxpc3QnKTsgLy8gY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImFsbFwiXScpO1xuICAvLyBjb25zdCBkYWljaGlSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiZGFpY2hpXCJdJyk7XG4gIC8vIGNvbnN0IGRhaWtpblJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJkYWlraW5cIl0nKTtcbiAgLy8gY29uc3QgYm9zY2hSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiYm9zY2hcIl0nKTtcbiAgLy8gY29uc3QgbWlkZWFSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwibWlkZWFcIl0nKTtcblxuICB2YXIgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19faXRlbScpO1xuICB2YXIgcmFkaW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW8nKTsgLy8gY29uc3QgZmluZENoZWNrZWRCcmFuZCA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGxldCBicmFuZCA9ICcnO1xuICAvLyAgIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uKHJhZGlvKSB7XG4gIC8vICAgICBpZiAocmFkaW8uY2hlY2tlZCkge1xuICAvLyAgICAgICBicmFuZCA9IHJhZGlvLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcbiAgLy8gICByZXR1cm4gYnJhbmQ7XG4gIC8vIH07XG5cbiAgdmFyIHNob3dDYXJkID0gZnVuY3Rpb24gc2hvd0NhcmQoY2FyZCkge1xuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoaWRlQ2FyZCA9IGZ1bmN0aW9uIGhpZGVDYXJkKGNhcmQpIHtcbiAgICBpZiAoIWNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHNob3dBbGxDYXJkcyA9IGZ1bmN0aW9uIHNob3dBbGxDYXJkcygpIHtcbiAgICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uIChjYXJkKSB7XG4gICAgICBzaG93Q2FyZChjYXJkKTtcbiAgICB9KTtcbiAgfTsgLy8gY29uc3QgaGlkZUFsbENhcmRzID0gZnVuY3Rpb24oKSB7XG4gIC8vICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKSB7XG4gIC8vICAgIGhpZGVDYXJkKGNhcmQpO1xuICAvLyAgIH0pXG4gIC8vIH07XG5cblxuICB2YXIgcmVuZGVyQ2FyZHMgPSBmdW5jdGlvbiByZW5kZXJDYXJkcyhicmFuZCkge1xuICAgIGlmIChicmFuZCA9PT0gJ2FsbCcpIHtcbiAgICAgIHNob3dBbGxDYXJkcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93QWxsQ2FyZHMoKTtcbiAgICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24gKGNhcmQpIHtcbiAgICAgICAgaWYgKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLWJyYW5kJykgIT09IGJyYW5kKSB7XG4gICAgICAgICAgaGlkZUNhcmQoY2FyZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb25SYWRpb0NoYW5nZSA9IGZ1bmN0aW9uIG9uUmFkaW9DaGFuZ2UoZSkge1xuICAgIHZhciBicmFuZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgcmVuZGVyQ2FyZHMoYnJhbmQpO1xuICB9O1xuXG4gIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uIChyYWRpbykge1xuICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uUmFkaW9DaGFuZ2UpO1xuICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBoZWFkZXJCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iYXItbW9iaWxlJyk7XG4gIHZhciBpc1Njcm9sbGVkID0gd2luZG93LnBhZ2VZT2Zmc2V0ID4gMTAwO1xuXG4gIHZhciBzaG93SGVhZGVyID0gZnVuY3Rpb24gc2hvd0hlYWRlcigpIHtcbiAgICAhaGVhZGVyQmFyLmNsYXNzTGlzdC5jb250YWlucygnb3BlbmVkJykgJiYgaGVhZGVyQmFyLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICB9O1xuXG4gIHZhciBoaWRlSGVhZGVyID0gZnVuY3Rpb24gaGlkZUhlYWRlcigpIHtcbiAgICBoZWFkZXJCYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKSAmJiBoZWFkZXJCYXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gIH07XG5cbiAgdmFyIG9uU2Nyb2xsID0gZnVuY3Rpb24gb25TY3JvbGwoKSB7XG4gICAgaWYgKCFpc1Njcm9sbGVkICYmIHdpbmRvdy5wYWdlWU9mZnNldCA+IDEwMCkge1xuICAgICAgc2hvd0hlYWRlcigpO1xuICAgICAgaXNTY3JvbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGlzU2Nyb2xsZWQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgMTAwKSB7XG4gICAgICBoaWRlSGVhZGVyKCk7XG4gICAgICBpc1Njcm9sbGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgc2hvd0hlYWRlcigpO1xuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xufSkoKTsiLCIoKCkgPT4ge1xuICBsZXQgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuXG4gIGNvbnN0ICRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMpe1xuICAgIHZhciB0aW1lcjtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgaWYodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuYywxMDAsZXZlbnQpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShvblJlc2l6ZSkpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsICh0cmlnZ2VyLCBtb2RhbCkge1xuICAgIHRoaXMudHJpZ2dlciA9IHRyaWdnZXI7XG4gICAgdGhpcy5tb2RhbCA9IG1vZGFsO1xuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19vdmVybGF5Jyk7XG4gICAgdGhpcy5jbG9zZUJ0biA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuXG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTtcbiAgICAvL3RoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnanMtc2hvdycpO1xuICAgICRib2R5LmNsYXNzTGlzdC5hZGQoJ2pzX19ib2R5LW5vLXNjcm9sbCcpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zaG93Jyk7XG4gICAgJGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnanNfX2JvZHktbm8tc2Nyb2xsJyk7XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25PdmVybGF5Q2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUub25DbG9zZUNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uVHJpZ2dlckNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5vcGVuKCk7XG4gIH1cblxuICAvLyBNb2RhbC5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgLy8gICAgIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIC8vICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt2aH1weGApO1xuICAvLyB9O1xuXG4gIE1vZGFsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25PdmVybGF5Q2xpY2spO1xuICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VDbGljayk7XG4gICAgdGhpcy50cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblRyaWdnZXJDbGljayk7XG4gIH1cblxuICB3aW5kb3cuTW9kYWwgPSBNb2RhbDtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dC1waG9uZScpO1xuXG4gIGlmICghaW5wdXRzWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaW0gPSBuZXcgSW5wdXRtYXNrKFwiKzcoOTk5KSA5OTktOTktOTlcIik7XG5cbiAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgIGltLm1hc2soaXRlbSk7XG4gIH0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtY29udHJvbF9faXRlbS10ZXh0Jyk7XG5cbiAgY29uc3Qgb25JdGVtc0NsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIGNvbnN0IG9uSXRlbU92ZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdob3ZlcmVkJyk7XG4gIH1cblxuICBjb25zdCBvbkl0ZW1MZWF2ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyZWQnKTtcbiAgfVxuXG4gIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkl0ZW1zQ2xpY2spO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIG9uSXRlbU92ZXIpO1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG9uSXRlbUxlYXZlKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCBmaWx0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtbGlzdCcpO1xuXG4gIC8vIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2ZpbHRlcnMtcmFkaW9bdmFsdWU9XCJhbGxcIl0nKTtcbiAgLy8gY29uc3QgZGFpY2hpUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImRhaWNoaVwiXScpO1xuICAvLyBjb25zdCBkYWlraW5SYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvW3ZhbHVlPVwiZGFpa2luXCJdJyk7XG4gIC8vIGNvbnN0IGJvc2NoUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cImJvc2NoXCJdJyk7XG4gIC8vIGNvbnN0IG1pZGVhUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fZmlsdGVycy1yYWRpb1t2YWx1ZT1cIm1pZGVhXCJdJyk7XG5cbiAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19faXRlbScpO1xuXG4gIGNvbnN0IHJhZGlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nX19maWx0ZXJzLXJhZGlvJyk7XG5cbiAgLy8gY29uc3QgZmluZENoZWNrZWRCcmFuZCA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGxldCBicmFuZCA9ICcnO1xuICAvLyAgIHJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uKHJhZGlvKSB7XG4gIC8vICAgICBpZiAocmFkaW8uY2hlY2tlZCkge1xuICAvLyAgICAgICBicmFuZCA9IHJhZGlvLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcblxuICAvLyAgIHJldHVybiBicmFuZDtcbiAgLy8gfTtcblxuICBjb25zdCBzaG93Q2FyZCA9IGZ1bmN0aW9uKGNhcmQpIHtcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoaWRlQ2FyZCA9IGZ1bmN0aW9uKGNhcmQpIHtcbiAgICBpZiAoIWNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hvd0FsbENhcmRzID0gZnVuY3Rpb24oKSB7XG4gICAgY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKSB7XG4gICAgICBzaG93Q2FyZChjYXJkKTtcbiAgICB9KVxuICB9O1xuXG4gIC8vIGNvbnN0IGhpZGVBbGxDYXJkcyA9IGZ1bmN0aW9uKCkge1xuICAvLyAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24oY2FyZCkge1xuICAvLyAgICBoaWRlQ2FyZChjYXJkKTtcbiAgLy8gICB9KVxuICAvLyB9O1xuXG4gIGNvbnN0IHJlbmRlckNhcmRzID0gZnVuY3Rpb24oYnJhbmQpIHtcbiAgICBpZiAoYnJhbmQgPT09ICdhbGwnKSB7XG4gICAgICBzaG93QWxsQ2FyZHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0FsbENhcmRzKCk7XG4gICAgICBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpIHtcbiAgICAgICAgaWYgKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLWJyYW5kJykgIT09IGJyYW5kKSB7XG4gICAgICAgICAgaGlkZUNhcmQoY2FyZCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uUmFkaW9DaGFuZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgYnJhbmQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAgIHJlbmRlckNhcmRzKGJyYW5kKTtcbiAgfTtcblxuICByYWRpb3MuZm9yRWFjaChmdW5jdGlvbihyYWRpbykge1xuICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uUmFkaW9DaGFuZ2UpO1xuICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgaGVhZGVyQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFyLW1vYmlsZScpO1xuXG4gIGxldCBpc1Njcm9sbGVkID0gd2luZG93LnBhZ2VZT2Zmc2V0ID4gMTAwO1xuXG4gIGNvbnN0IHNob3dIZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAhaGVhZGVyQmFyLmNsYXNzTGlzdC5jb250YWlucygnb3BlbmVkJylcbiAgICAmJiBoZWFkZXJCYXIuY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gIH1cblxuICBjb25zdCBoaWRlSGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgaGVhZGVyQmFyLmNsYXNzTGlzdC5jb250YWlucygnb3BlbmVkJylcbiAgICAmJiBoZWFkZXJCYXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gIH1cblxuICBjb25zdCBvblNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghaXNTY3JvbGxlZCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPiAxMDApIHtcbiAgICAgIHNob3dIZWFkZXIoKTtcbiAgICAgIGlzU2Nyb2xsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpc1Njcm9sbGVkICYmIHdpbmRvdy5wYWdlWU9mZnNldCA8IDEwMCkge1xuICAgICAgaGlkZUhlYWRlcigpO1xuICAgICAgaXNTY3JvbGxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgc2hvd0hlYWRlcigpO1xuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xufSkoKTtcbiJdfQ==
